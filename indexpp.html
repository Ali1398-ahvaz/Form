<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ماشین حساب حرفه‌ای — مکی لویمی</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: linear-gradient(180deg,#f8fafc,#e2e8f0);
      margin: 0;
    }
    .container {
      width: 340px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.15);
      padding: 16px;
    }
    .title {
      text-align: center;
      font-size: 22px;
      font-weight: bold;
    }
    .author {
      text-align: center;
      margin: 6px 0 14px;
      font-size: 14px;
      background: #000;
      color: #fff;
      border-radius: 12px;
      padding: 4px 10px;
      display: inline-block;
    }
    .screen {
      background: #f8fafc;
      border: 1px solid #ddd;
      border-radius: 12px;
      padding: 12px;
      text-align: right;
      font-family: monospace;
      font-size: 22px;
      margin-bottom: 12px;
      min-height: 36px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(4,1fr);
      gap: 8px;
    }
    button {
      padding: 14px;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      background: #f1f5f9;
      cursor: pointer;
      font-weight: bold;
    }
    button:active { transform: scale(0.95); }
    .op { background: #e0f2fe; }
    .eq { background: #000; color: #fff; }
    .ac { background: #fee2e2; }
  </style>
</head>
<body>
  <div class="container">
    <div class="title">ماشین حساب حرفه‌ای</div>
    <div class="author">نویسنده: مکی لویمی</div>

    <div id="screen" class="screen">0</div>

    <div class="grid">
      <button class="ac">AC</button>
      <button class="op">÷</button>
      <button class="op">×</button>
      <button class="op">−</button>

      <button>7</button>
      <button>8</button>
      <button>9</button>
      <button class="op">+</button>

      <button>4</button>
      <button>5</button>
      <button>6</button>
      <button class="eq">=</button>

      <button>1</button>
      <button>2</button>
      <button>3</button>
      <button>0</button>
    </div>
  </div>

  <script>
    const screen = document.getElementById("screen");
    let firstNum = "";
    let operator = "";
    let secondNum = "";
    let reset = false;

    function updateScreen(value) {
      screen.textContent = value || "0";
    }

    function calculate(a, b, op) {
      a = parseFloat(a);
      b = parseFloat(b);
      if (op === "+") return a + b;
      if (op === "−") return a - b;
      if (op === "×") return a * b;
      if (op === "÷") return b !== 0 ? a / b : "خطا";
      return b;
    }

    document.querySelectorAll("button").forEach(btn => {
      btn.addEventListener("click", () => {
        const val = btn.textContent;

        if (val === "AC") {
          firstNum = "";
          secondNum = "";
          operator = "";
          updateScreen("0");
          return;
        }

        if (["+", "−", "×", "÷"].includes(val)) {
          if (firstNum && !secondNum) {
            operator = val;
            updateScreen(firstNum + " " + operator);
          }
          return;
        }

        if (val === "=") {
          if (firstNum && operator && secondNum) {
            const result = calculate(firstNum, secondNum, operator);
            updateScreen(result);
            firstNum = result.toString();
            operator = "";
            secondNum = "";
          }
          return;
        }

        // عدد
        if (!operator) {
          firstNum += val;
          updateScreen(firstNum);
        } else {
          secondNum += val;
          updateScreen(firstNum + " " + operator + " " + secondNum);
        }
      });
    });
  </script>
</body>
</html>
